const unified = require('unified')
const remark = require('remark')
const markdown = require('remark-parse')
const html = require('remark-html')
const highlight = require('remark-highlight.js')
const slug = require('remark-slug')
const graphviz = require('remark-graphviz')
const mermaid = require('remark-mermaid')
const externalLinks = require('remark-external-links')
const divs = require('remark-fenced-divs')
const remarkAttr = require('remark-attr')

function mdConvert() {
    let removeOn = /on\w+=(["\'])[^\1]*?\1/ig
    return remark()
            .use(markdown)
            // .use(mermaid)
            // .use(graphviz)
            .use(externalLinks, {target: false, rel: false})
            .use(highlight)
            .use(slug)
            .use(divs)
            .use(remarkAttr)
            .use(html)
}

module.exports = mdConvert