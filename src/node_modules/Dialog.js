const bel = require('bel')
const csjs = require('csjs-inject')

function Dialog(protocol) {
    const css = style

    const cancel = bel`<button  class="${css.btn} ${css.cancel}" 
                                onclick=${() => actionHandler('cancel')}>
                                Cancel
                        </button>`
                        
    const submit = bel`<button  class="${css.btn} ${css.submit}" 
                                onclick=${() => actionHandler('submit')}>
                                I understand the consequences, delete this version from package
                        </button>`

    const el = bel`
    <div class=${css.overlay}>
        <div class=${css.dialog}>
            <h1 class=${css.title}>Warning!</h1>
            <p class=${css.message}>This version will be removed from package.</p>
            <div class=${css.actions}>
                ${cancel}
                ${submit}
            </div>
        </div>
    </div>
    `
    return el

    function actionHandler(target) {
        el.remove()
        if (target === 'submit') {
            protocol()
        }
    }
}

const style = csjs`
.overlay {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 99;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0, 0.8);
    display: grid;
    justify-items: center;
    align-items: center;
}
.dialog {
    width: 60%;
    background-color: white;
    padding: 2vh 4vh 4vh 4vh;
    border-radius: 6px;
}
.title {
    text-align: center;
    color: red;
}
.message {
    text-align: center;
}
.actions {
    text-align: center;
}
.btn {
    display: inline-flex;
    align-items: center;
    outline: none;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: var(--dialogBtnFontSize);
    color: var(--btnColor);
    background-color: var(--btnBgColor);
    margin: 5px 5px 0 0;
 }
 .btn:hover {
     color: var(--btnHoverColor);
     background-color: var(--btnHoverBgColor);
 }
 .btn:hover svg {
    fill: white;
}
.cancel:hover {
    background-color: var(--actionCancelHoverBgColor);
}
.submit:hover {
    color: #fff;
    background-color: var(--actionRemoveBgColor);
}

`

module.exports = Dialog