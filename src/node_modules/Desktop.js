const bel = require('bel')
const csjs = require('csjs-inject')
// widgets
const Graphic = require('Graphic')

function Desktop(app, { title, icon }, tartget) {
    const css = style
    const cors = "https://cors-anywhere.herokuapp.com/"
    const regex = /^http/
    const path = icon.split("/")
    let filter = path[path.length - 1]

    if ( filter.includes('svg') ) {
        var appicon = Graphic(icon, css.icon)
    } else {
        var url = icon.split(cors).join('')
        var appicon = bel`<div class=${css.icon}><img src=${url}></div>`
    }
    const el = bel`
        <div class="${css.app} ${title}" onclick=${ () => tartget(app) }>
            ${appicon}      
            <span class=${css['app-name']}>${title}</span>
        </div>
    `

    return el

}


const style = csjs`
.app {
    display: grid;
    grid-template-rows: 60px auto;
    text-align: center;
    justify-items: center;
    cursor: pointer;
    overflow: hidden;
    grid-gap: 7px 0;
    width: 100%;
}
.app-name {
    font-size: var(--appNameFontSize);
    color: var(--appNameColor);
    word-break: break-word;
}
.app:hover div svg g path {
    fill: var(--appHoverColor);
}
.app:hover div svg g rect {
    fill: var(--appHoverColor);
}
.app:hover .app-name {
    color: var(--appHoverColor);
    text-decoration: underline;
}
.icon {
    width: 60px;
}
`

module.exports = Desktop